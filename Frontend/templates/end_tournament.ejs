<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Pong Game - End of Tournament</title>
      <%- include('/usr/src/app/Frontend/templates/links.ejs') %>

</head>
<body class="font-mainFont bg-gradient-to-l from-cyan-800 to-sky-950 min-h-screen">
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      navigateTo("index"); // Appelle la fonction au chargement de la page
      set_up_friend_list();
    });
  </script>
  <div id="content">
    <%- include('/usr/src/app/Frontend/templates/navbar.ejs') %>
	<%- include('sidebar.ejs') %>
    <br><br><br>
    <h1>🏆 Classement du Tournoi 🏆</h1>

    <% if (classement.length > 0) { %>
      <table border="1">
        <tr>
          <th>Position</th>
          <th>Joueur</th>
          <th>Score</th>
        </tr>
        <% let oldScore = 0; %>
        <% let oldPlace = 1; %>
        <% let Place = 0; %>
        <% classement.forEach((player, index) => { %>
          <% if (oldScore == player.score && index != 0) { %>
              <% Place = oldPlace %>
            <% } else { %>
              <% Place = index + 1 %>
            <% } %>
          <tr>
            <td><%= Place%> 🏅</td>
            <td><%= player.username %></td>
            <td><%= player.score %></td>
          </tr>
          <% oldScore = player.score%>
          <% oldPlace = Place%>
        <% }) %>
      </table>
    <% } else { %>
      <p>Aucun classement disponible.</p>
    <% } %>

    <%- include('/usr/src/app/Frontend/templates/scripts.ejs') %>
    <canvas id="friends_list" width="300" height="500"></canvas>
  </div>
</body>
</html>